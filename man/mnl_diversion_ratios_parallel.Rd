% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{mnl_diversion_ratios_parallel}
\alias{mnl_diversion_ratios_parallel}
\title{Compute MNL diversion ratios (parallelized over individuals)}
\usage{
mnl_diversion_ratios_parallel(
  theta,
  X,
  alt_idx,
  M,
  weights,
  use_asc = TRUE,
  include_outside_option = FALSE
)
}
\arguments{
\item{theta}{K + J - 1 or K + J vector with model parameters}

\item{X}{sum(M) x K design matrix with covariates.}

\item{alt_idx}{sum(M) x 1 vector with indices of alternatives; 1-based indexing}

\item{M}{N x 1 vector with number of alternatives for each individual}

\item{weights}{N x 1 vector with weights for each observation}

\item{use_asc}{whether to use alternative-specific constants}

\item{include_outside_option}{whether to include outside option}
}
\value{
J x J matrix where entry (k, j) = DR(j->k). Diagonal is 0.
}
\description{
Computes the diversion ratio matrix DR(j->k), which measures the fraction
of demand lost by alternative j that is captured by alternative k.
For MNL: DR(j->k) = sum_n(w_n * P_nj * P_nk) / sum_n(w_n * P_nj * (1 - P_nj))
}
