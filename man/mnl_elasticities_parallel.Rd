% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{mnl_elasticities_parallel}
\alias{mnl_elasticities_parallel}
\title{Compute aggregate elasticities for MNL model}
\usage{
mnl_elasticities_parallel(
  theta,
  X,
  alt_idx,
  choice_idx,
  M,
  weights,
  elast_var_idx,
  use_asc = TRUE,
  include_outside_option = FALSE
)
}
\arguments{
\item{theta}{K + J - 1 or K + J vector with model parameters}

\item{X}{sum(M) x K design matrix with covariates.}

\item{alt_idx}{sum(M) x 1 vector with indices of alternatives; 1-based indexing}

\item{choice_idx}{N x 1 vector (kept for API consistency, but not used)}

\item{M}{N x 1 vector with number of alternatives for each individual}

\item{weights}{N x 1 vector with weights for each observation}

\item{elast_var_idx}{1-based index of the column in X for which to compute the elasticity}

\item{use_asc}{whether to use alternative-specific constants}

\item{include_outside_option}{whether to include outside option}
}
\value{
J x J matrix of aggregate elasticities
}
\description{
Computes the aggregate elasticity matrix (weighted average of individual
elasticities) for the Multinomial Logit model.
}
\examples{
\donttest{
library(data.table)
set.seed(42)
N <- 50; J <- 3
dt <- data.table(id = rep(1:N, each = J), alt = rep(1:J, N))
dt[, `:=`(x1 = rnorm(.N), x2 = rnorm(.N))]
dt[, choice := 0L]
dt[, choice := sample(c(1L, rep(0L, J - 1))), by = id]
fit <- run_mnlogit(dt, "id", "alt", "choice", c("x1", "x2"))
elas <- mnl_elasticities_parallel(coef(fit), fit$data$X, fit$data$alt_idx,
  fit$data$choice_idx, fit$data$M, fit$data$weights, elast_var_idx = 1L)
elas
}
}
