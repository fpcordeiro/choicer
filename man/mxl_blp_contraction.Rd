% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{mxl_blp_contraction}
\alias{mxl_blp_contraction}
\title{BLP contraction mapping for mixed logit}
\usage{
mxl_blp_contraction(
  delta,
  target_shares,
  X,
  W,
  beta,
  mu,
  L_params,
  alt_idx,
  M,
  weights,
  eta_draws,
  rc_dist,
  rc_correlation = TRUE,
  rc_mean = FALSE,
  include_outside_option = FALSE,
  tol = 1e-08,
  max_iter = 1000L
)
}
\arguments{
\item{delta}{J-1 or J vector with initial guess for deltas (ASCs)}

\item{target_shares}{J vector with target market shares}

\item{X}{design matrix for fixed coefficients; sum(M_i) x K_x}

\item{W}{design matrix for random coefficients; sum(M_i) x K_w or J x K_w}

\item{beta}{K_x vector with fixed coefficients}

\item{mu}{K_w vector with mean parameters (raw, will be transformed if log-normal)}

\item{L_params}{Cholesky parameters vector}

\item{alt_idx}{sum(M) x 1 vector with indices of alternatives; 1-based indexing}

\item{M}{N x 1 vector with number of alternatives for each individual}

\item{weights}{N x 1 vector with weights for each observation}

\item{eta_draws}{Array with draws; K_w x S x N}

\item{rc_dist}{K_w vector indicating distribution (0=normal, 1=log-normal)}

\item{rc_correlation}{whether random coefficients are correlated}

\item{rc_mean}{whether mu parameters represent means (TRUE) or are zero (FALSE)}

\item{include_outside_option}{whether outside option is included}

\item{tol}{convergence tolerance (default 1e-8)}

\item{max_iter}{maximum iterations (default 1000)}
}
\value{
vector with converged delta (ASC) values
}
\description{
Finds the ASC (delta) parameters such that predicted market shares
match target shares, using the contraction mapping of Berry, Levinsohn,
and Pakes (1995).
}
